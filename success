#!/bin/bash

if [[ "$1" == "linux" ]]; then
    sudo apt-get install node.js
fi
token=${GH_TOKEN}
if [[ "${token}" != "" ]]; then
    echo "--- Have Token ---"
    token="${token}@"
else
    echo "--- NO TOKEN ---"
fi

git clone https://${token}github.com/Loki-Astari/geeky-nextjs

#for a in osx linux windows; do
for a in osx linux ; do

    php ./script/conformance.php geeky-nextjs/public/Json/raw/Conformance.${os}.csv > geeky-nextjs/public/Json/Conformance.${os}.html
    php ./script/performance.php geeky-nextjs/public/Json/raw/Performance.${os}.csv > geeky-nextjs/public/Json/Performance.${os}.html

done

php ./script/stats.php       geeky-nextjs/public/Json/raw/Stats.csv   > loki-astari.github.io/source/Json/Stats.html

cd geeky-nextjs
git config --global user.email "Loki.Astari@gmail.com"
git config --global user.name "Loki Astari"
git commit -a -m "Update $1 Files"
git push https://${token}github.com/Loki-Astari/geeky-nextjs

